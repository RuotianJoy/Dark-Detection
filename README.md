# åŸºäºè®¡ç®—æœºè§†è§‰å’ŒYOLOæ¨¡å‹çš„è¿ˆå…‹è€³å­™å¹²æ¶‰æ¡çº¹è¿åŠ¨å¼ºåº¦åˆ†æç ”ç©¶

## é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æå‡ºäº†ä¸€ç§åŸºäºè®¡ç®—æœºè§†è§‰å’Œæ·±åº¦å­¦ä¹ çš„è¿ˆå…‹è€³å­™å¹²æ¶‰æ¡çº¹è¿åŠ¨å¼ºåº¦åˆ†ææ–¹æ³•ã€‚é€šè¿‡YOLOv12sç›®æ ‡æ£€æµ‹æ¨¡å‹å¯¹å¹²æ¶‰æ¡çº¹è¿›è¡Œè‡ªåŠ¨è¯†åˆ«å’Œè·Ÿè¸ªï¼Œç»“åˆæ¸©åº¦å˜åŒ–ç‡åˆ†æï¼Œæ­ç¤ºäº†æ¸©åº¦åŠ¨æ€å˜åŒ–è¿‡ç¨‹å¯¹æ¡çº¹è¿åŠ¨å¼ºåº¦çš„å½±å“è§„å¾‹ã€‚

## ä¸»è¦ç‰¹æ€§

- ğŸ¯ **è‡ªåŠ¨åŒ–æ£€æµ‹**ï¼šåŸºäºYOLOv12sæ¨¡å‹å®ç°å¹²æ¶‰æ¡çº¹çš„è‡ªåŠ¨è¯†åˆ«å’Œè·Ÿè¸ª
- ğŸ“Š **è¿åŠ¨å¼ºåº¦åˆ†æ**ï¼šå®šé‡åˆ†ææ¡çº¹è¿åŠ¨å¼ºåº¦ä¸æ¸©åº¦å˜åŒ–çš„å…³ç³»
- ğŸ”¬ **å¤§è§„æ¨¡æ•°æ®é›†**ï¼šåŒ…å«49,984å¸§å›¾åƒæ•°æ®ï¼Œæ¸©åº¦èŒƒå›´30-46Â°C
- ğŸ¤– **æœºå™¨å­¦ä¹ é¢„æµ‹**ï¼šæ„å»ºéšæœºæ£®æ—æ¨¡å‹é¢„æµ‹æ¡çº¹è¿åŠ¨å¼ºåº¦
- ğŸ“ˆ **å¯è§†åŒ–åˆ†æ**ï¼šæä¾›å®Œæ•´çš„æ•°æ®åˆ†æå’Œå¯è§†åŒ–ç»“æœ

## é¡¹ç›®ç»“æ„

```
Dark-Detection/
â”œâ”€â”€ DataProcess/                    # æ•°æ®å¤„ç†æ¨¡å—
â”‚   â””â”€â”€ temperature/                # æ¸©åº¦æ•°æ®å¤„ç†
â”‚       â”œâ”€â”€ temp.py                # æ¸©åº¦æ•°æ®å¤„ç†è„šæœ¬
â”‚       â”œâ”€â”€ å˜åŒ–å¸§.xlsx            # æ¸©åº¦å˜åŒ–æ•°æ®
â”‚       â””â”€â”€ æ¯30å¸§æ‹Ÿåˆæ¸©åº¦.xlsx    # æ’å€¼åçš„æ¸©åº¦æ•°æ®
â”œâ”€â”€ Train/                         # è®­ç»ƒæ¨¡å—
â”‚   â””â”€â”€ YoloTrain/                 # YOLOæ¨¡å‹è®­ç»ƒ
â”‚       â”œâ”€â”€ Model/                 # æ¨¡å‹æ–‡ä»¶å’Œè®­ç»ƒç»“æœ
â”‚       â”‚   â””â”€â”€ runs/              # è®­ç»ƒè¾“å‡ºç»“æœ
â”‚       â”‚       â””â”€â”€ train_with_temp/  # è®­ç»ƒè¿‡ç¨‹æ–‡ä»¶
â”‚       â”œâ”€â”€ dataset/               # æ•°æ®é›†
â”‚       â”œâ”€â”€ PreProcess/            # æ•°æ®é¢„å¤„ç†
â”‚       â”œâ”€â”€ custom_yolo.py         # è‡ªå®šä¹‰YOLOæ¨¡å‹
â”‚       â”œâ”€â”€ detection.py           # æ£€æµ‹è„šæœ¬
â”‚       â”œâ”€â”€ yolomain.py           # ä¸»è®­ç»ƒè„šæœ¬
â”‚       â”œâ”€â”€ data.yaml             # æ•°æ®é…ç½®æ–‡ä»¶
â”‚       â”œâ”€â”€ detection_output_with_motion.xlsx  # æ£€æµ‹ç»“æœæ•°æ®
â”‚       â”œâ”€â”€ ç»¼åˆè¿åŠ¨å¼ºåº¦åˆ†æç»“æœ.png           # åˆ†æç»“æœå›¾è¡¨
â”‚       â””â”€â”€ interference_fringe_analysis_paper.tex  # ç ”ç©¶è®ºæ–‡
â”œâ”€â”€ VedioProcess/                  # è§†é¢‘å¤„ç†æ¨¡å—
â”‚   â”œâ”€â”€ CutVedio.py               # è§†é¢‘åˆ‡å‰²
â”‚   â”œâ”€â”€ devide.py                 # å¸§åˆ†å‰²
â”‚   â””â”€â”€ extracted_frames/         # æå–çš„è§†é¢‘å¸§
â””â”€â”€ Vedio/                        # åŸå§‹è§†é¢‘æ–‡ä»¶
    â”œâ”€â”€ Processed2.mp4
    â””â”€â”€ æ•°æ®äºŒ.mp4
```

## ç¯å¢ƒè¦æ±‚

### ç³»ç»Ÿè¦æ±‚
- Python 3.8+
- CUDA 11.0+ (GPUè®­ç»ƒæ¨è)
- Windows/Linux/macOS

### ä¾èµ–åŒ…
```bash
# æ·±åº¦å­¦ä¹ æ¡†æ¶
torch>=1.12.0
torchvision>=0.13.0
ultralytics>=8.0.0

# è®¡ç®—æœºè§†è§‰
opencv-python>=4.5.0
Pillow>=8.0.0

# æ•°æ®å¤„ç†
numpy>=1.21.0
pandas>=1.3.0
scipy>=1.7.0
matplotlib>=3.5.0
seaborn>=0.11.0

# æœºå™¨å­¦ä¹ 
scikit-learn>=1.0.0

# å…¶ä»–å·¥å…·
tqdm>=4.62.0
PyYAML>=6.0
```

## å®‰è£…è¯´æ˜

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/your-username/Dark-Detection.git
cd Dark-Detection
```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**
```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
# æˆ–
venv\Scripts\activate     # Windows
```

3. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

4. **ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹**
```bash
# ä¸‹è½½YOLOv12sé¢„è®­ç»ƒæƒé‡
wget https://github.com/ultralytics/assets/releases/download/v0.0.0/yolo12s.pt
# æˆ–æ‰‹åŠ¨ä¸‹è½½å¹¶æ”¾ç½®åˆ° Train/YoloTrain/ ç›®å½•ä¸‹
```

## ä½¿ç”¨æ–¹æ³•

### 1. æ•°æ®é¢„å¤„ç†

```bash
# å¤„ç†è§†é¢‘æ–‡ä»¶ï¼Œæå–å¸§
cd VedioProcess
python CutVedio.py
python devide.py

# å¤„ç†æ¸©åº¦æ•°æ®
cd ../DataProcess/temperature
python temp.py
```

### 2. æ¨¡å‹è®­ç»ƒ

```bash
cd Train/YoloTrain

# è®­ç»ƒYOLOæ¨¡å‹
python yolomain.py

# æˆ–ä½¿ç”¨è‡ªå®šä¹‰é…ç½®
python custom_yolo.py --epochs 100 --batch-size 12 --img-size 704
```

### 3. æ¡çº¹æ£€æµ‹

```bash
# è¿è¡Œæ£€æµ‹è„šæœ¬
python detection.py --source path/to/images --weights Model/runs/train_with_temp/weights/best.pt
```

### 4. è¿åŠ¨å¼ºåº¦åˆ†æ

æ£€æµ‹å®Œæˆåï¼Œè¿åŠ¨å¼ºåº¦åˆ†æç»“æœå°†ä¿å­˜åœ¨ï¼š
- `detection_output_with_motion.xlsx`ï¼šè¯¦ç»†æ£€æµ‹æ•°æ®
- `ç»¼åˆè¿åŠ¨å¼ºåº¦åˆ†æç»“æœ.png`ï¼šå¯è§†åŒ–åˆ†æå›¾è¡¨
- `ç»¼åˆè¿åŠ¨å¼ºåº¦åˆ†ææŠ¥å‘Š.txt`ï¼šåˆ†ææŠ¥å‘Š

## ä¸»è¦ç»“æœ

### æ¨¡å‹æ€§èƒ½
- **mAP@0.5**: 50.3%
- **ç²¾ç¡®ç‡**: 90.5%
- **å¬å›ç‡**: 36.7%
- **F1åˆ†æ•°**: 0.67

### ç§‘å­¦å‘ç°
- æ¸©åº¦å˜åŒ–ç‡ä¸æ¡çº¹è¿åŠ¨å¼ºåº¦å‘ˆæ˜¾è‘—æ­£ç›¸å…³ï¼ˆr=0.011, p=0.014ï¼‰
- æ¸©åº¦ç»å¯¹å€¼ä¸è¿åŠ¨å¼ºåº¦å‘ˆè´Ÿç›¸å…³ï¼ˆr=-0.021, p<0.001ï¼‰
- éšæœºæ£®æ—é¢„æµ‹æ¨¡å‹RÂ²è¾¾åˆ°0.6209
- æ¸©åº¦åŠ¨æ€å˜åŒ–ç‰¹å¾é‡è¦æ€§ï¼ˆ64.61%ï¼‰è¿œè¶…æ¸©åº¦ç»å¯¹å€¼ç‰¹å¾ï¼ˆ14.56%ï¼‰

## æ•°æ®æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒæ•°æ®æ–‡ä»¶
- **detection_output_with_motion.xlsx**: 49,984æ¡æ£€æµ‹è®°å½•ï¼ŒåŒ…å«å¸§ç¼–å·ã€åæ ‡ã€ç½®ä¿¡åº¦ã€æ¸©åº¦å€¼å’Œè¿åŠ¨å¼ºåº¦
- **æ¯30å¸§æ‹Ÿåˆæ¸©åº¦.xlsx**: æ¸©åº¦æ’å€¼ç»“æœï¼Œ1,681ä¸ªé‡‡æ ·ç‚¹
- **ç»¼åˆè¿åŠ¨å¼ºåº¦åˆ†æç»“æœ.png**: æ¸©åº¦ä¸è¿åŠ¨å¼ºåº¦çš„ç»¼åˆåˆ†æå¯è§†åŒ–

### è®­ç»ƒç»“æœæ–‡ä»¶
- **results.csv/png**: è®­ç»ƒè¿‡ç¨‹æŒ‡æ ‡è®°å½•å’Œå¯è§†åŒ–
- **confusion_matrix.png**: æ··æ·†çŸ©é˜µ
- **F1_curve.png, PR_curve.png**: æ€§èƒ½æ›²çº¿
- **weights/**: è®­ç»ƒå¾—åˆ°çš„æ¨¡å‹æƒé‡

## æ¸©åº¦æ•°æ®å¤„ç†è¯¦æƒ…

### æ’å€¼æ–¹æ³•
æœ¬é¡¹ç›®ä½¿ç”¨åˆ†æ®µæ’å€¼æ–¹æ³•å¤„ç†æ¸©åº¦æ•°æ®ï¼š

- **å¸§æ•° < 27000**: ä½¿ç”¨ä¸‰æ¬¡æ ·æ¡æ’å€¼ï¼ˆ`scipy.interpolate.CubicSpline`ï¼‰
  - è‡ªç„¶è¾¹ç•Œæ¡ä»¶
  - ä¿æŒæ¸©åº¦å˜åŒ–çš„å¹³æ»‘æ€§
- **å¸§æ•° â‰¥ 27000**: ä½¿ç”¨çº¿æ€§æ’å€¼ï¼ˆ`scipy.interpolate.interp1d`ï¼‰
  - å¯ç”¨å¤–æ¨åŠŸèƒ½
  - é€‚åº”åæœŸæ¸©åº¦å˜åŒ–çš„çº¿æ€§ç‰¹å¾

### æ•°å­¦å…¬å¼
1. **å¸§æ•° â‰¤ 27000**: ä¸‰æ¬¡æ ·æ¡æ–¹ç¨‹ `y = axÂ³ + bxÂ² + cx + d`
2. **å¸§æ•° > 27000**: çº¿æ€§æ–¹ç¨‹ `y = 0.10000x + 43.80000`

## è®ºæ–‡å’Œæ–‡æ¡£

å®Œæ•´çš„ç ”ç©¶è®ºæ–‡ä½äº `Train/YoloTrain/interference_fringe_analysis_paper.tex`ï¼ŒåŒ…å«ï¼š
- è¯¦ç»†çš„å®éªŒè®¾è®¡å’Œæ–¹æ³•
- å®Œæ•´çš„ç»“æœåˆ†æ
- ç‰©ç†æœºåˆ¶è®¨è®º
- å›¾è¡¨å’Œæ•°æ®è¯´æ˜

è®ºæ–‡çš„å¤šç§æ ¼å¼ç‰ˆæœ¬ï¼š
- LaTeXæºæ–‡ä»¶ï¼š`interference_fringe_analysis_paper.tex`
- HTMLç‰ˆæœ¬ï¼š`interference_fringe_analysis_paper.html`
- Markdownç‰ˆæœ¬ï¼š`interference_fringe_analysis_paper.md`
- çº¯æ–‡æœ¬ç‰ˆæœ¬ï¼š`interference_fringe_analysis_paper.txt`

## é…ç½®æ–‡ä»¶

### data.yaml
```yaml
train: dataset/train
val: dataset/val
nc: 2  # ç±»åˆ«æ•°é‡
names: ['udark', 'cdark']  # ç±»åˆ«åç§°
```

### è®­ç»ƒå‚æ•°
- è¾“å…¥å›¾åƒå°ºå¯¸ï¼š704Ã—704
- æ‰¹å¤„ç†å¤§å°ï¼š12
- å­¦ä¹ ç‡ï¼š0.001
- è®­ç»ƒè½®æ•°ï¼š100 epochs
- ä¼˜åŒ–å™¨ï¼šAdamW

## å®éªŒè£…ç½®

### ç¡¬ä»¶è®¾å¤‡
- æ¿€å…‰å…‰æºï¼šHe-Neæ¿€å…‰å™¨ï¼ˆæ³¢é•¿632.8nmï¼‰
- åˆ†æŸé•œï¼š50/50åˆ†å…‰æ¯”
- é«˜åå°„ç‡å¹³é¢åå°„é•œ
- å¯ç§»åŠ¨åå°„é•œè°ƒèŠ‚è£…ç½®
- CCDç›¸æœºï¼šåˆ†è¾¨ç‡1920Ã—1080ï¼Œå¸§ç‡30fps
- æ¸©åº¦æ§åˆ¶å’Œç›‘æµ‹ç³»ç»Ÿï¼šæ¸©åº¦èŒƒå›´30-46Â°C

### æ•°æ®é‡‡é›†
- æ€»é‡‡é›†å¸§æ•°ï¼š49,984å¸§
- å›¾åƒå°ºå¯¸ï¼š704Ã—704åƒç´ 
- é‡‡æ ·é—´éš”ï¼šæ¯30å¸§æå–ä¸€å¸§
- æ¸©åº¦é‡‡æ ·ç‚¹ï¼š1,681ä¸ª
- æ ‡æ³¨ç±»åˆ«ï¼šudarkï¼ˆä¸Šæš—æ¡çº¹ï¼‰ã€cdarkï¼ˆä¸­å¿ƒæš—æ¡çº¹ï¼‰

## è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## å¼•ç”¨

å¦‚æœæ‚¨åœ¨ç ”ç©¶ä¸­ä½¿ç”¨äº†æœ¬é¡¹ç›®ï¼Œè¯·å¼•ç”¨ï¼š

```bibtex
@article{interference_fringe_analysis_2024,
  title={åŸºäºè®¡ç®—æœºè§†è§‰å’ŒYOLOæ¨¡å‹çš„è¿ˆå…‹è€³å­™å¹²æ¶‰æ¡çº¹è¿åŠ¨å¼ºåº¦åˆ†æç ”ç©¶},
  author={ä½œè€…å§“å},
  journal={æœŸåˆŠåç§°},
  year={2024},
  note={Available at: https://github.com/your-username/Dark-Detection}
}
```

## è”ç³»æ–¹å¼

- ä½œè€…ï¼š[ä½œè€…å§“å]
- é‚®ç®±ï¼šauthor@email.com
- é¡¹ç›®é“¾æ¥ï¼šhttps://github.com/your-username/Dark-Detection

## è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®çš„æ”¯æŒï¼š
- [Ultralytics YOLO](https://github.com/ultralytics/ultralytics)
- [OpenCV](https://opencv.org/)
- [PyTorch](https://pytorch.org/)
- [scikit-learn](https://scikit-learn.org/)

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä»…ç”¨äºå­¦æœ¯ç ”ç©¶ç›®çš„ã€‚å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤Issueæˆ–è”ç³»ä½œè€…ã€‚